\documentclass[12pt,a4paper]{article}
\usepackage[margin=2.5cm]{geometry}
\usepackage{setspace}
\usepackage{pgfgantt}
\usepackage{adjustbox} 
\ganttset{
  time slot format=isodate,
  time slot unit=month,     
  vgrid, hgrid,
  group/.append style={fill=black!20},
  bar/.append style={fill=black!10},
  milestone/.append style={fill=black},
  bar label font=\footnotesize,
  title label font=\footnotesize
}
\usepackage{pdflscape}
\usepackage{titlesec}
\usepackage{tabularx}
\usepackage{ragged2e}
\usepackage{booktabs}
\usepackage{enumitem}
\usepackage{pdfpages}
\usepackage[hidelinks]{hyperref}
\usepackage{graphicx}
\usepackage{titling}
\usepackage{catchfile}
\usepackage{xassoccnt}
\usepackage{ltablex}
\keepXColumns
\usepackage[utf8]{inputenc}
\usepackage{newunicodechar}
\newunicodechar{↔}{\(\leftrightarrow\)}
\usepackage{siunitx,xfp}
\usepackage{catchfile}
\usepackage{bookmark}
\newcolumntype{R}{>{\raggedright\arraybackslash}p{0.3\linewidth}} 
\newcolumntype{Y}{>{\raggedright\arraybackslash}X}               
\setlength{\tabcolsep}{5pt}
\renewcommand{\arraystretch}{1.15}
\newcommand{\quickwordcount}[1]{%
  \CatchFileEdef\MyWordcount{|"texcount -1 -sum -merge #1.tex"}{\endlinechar=-1 }
  \MyWordcount
}
\usepackage[
  backend=biber,
  style=ieee,
  sorting=none,
  maxbibnames=99
]{biblatex}
\addbibresource{dissertation-sources.bib}
\usepackage{xassoccnt}
\NewTotalDocumentCounter{totalfigures}
\NewTotalDocumentCounter{totaltables}
\DeclareAssociatedCounters{figure}{totalfigures}
\DeclareAssociatedCounters{table}{totaltables}
\setstretch{1.25}
\setlength{\parskip}{0.8em}
\setlength{\parindent}{0pt}
\hyphenpenalty=10000
\exhyphenpenalty=10000

\titleformat{\section}{\large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalsize\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalsize\itshape}{\thesubsubsection}{1em}{}

\pretitle{
    \begin{center}
        \vspace*{-3cm}
    \includegraphics[width=0.35\textwidth]{UniLogo.png}\\[1.5cm]
    \LARGE\bfseries
}
\posttitle{\par\end{center}\vskip 1cm}
\title{Project Definition Document}
\author{}
\date{\today}
\begin{document}

\maketitle

\begin{center}
\textbf {Project Title:} {Decentralized Peer-to-Peer SMPC Sealed-Bid Auction App over the Veilid framework} \\[1cm]
\textbf{Degree Programme:} {BSc (Hons) Computer Science} \\[1cm]
\textbf{Project Consultant:} {Martin Nyx Brain} \\[1cm]
\textbf{By:}{Anker Rasmussen} \\[0.2cm]
{\small \textbf{anker.rasmussen@city.ac.uk}} \\ [0.3cm]
\textbf{Category:} Academic Client Project \\[0.3cm]
{\small \textbf{Subcategory:} Application Development} \\[1cm]
\textbf {Word count:}\quickwordcount{\jobname}\\[0.3cm]
\textbf {Proprietary Interests:} None
\end{center}

\newpage


\pdfbookmark[1]{Contents}{toc} 
\setcounter{tocdepth}{2}      
\setcounter{secnumdepth}{2}    
\tableofcontents
\clearpage
\section{Proposal}

\subsection{Problem to be Solved}
Popular online consumer marketplaces either use \emph{open, incrementally visible bidding} or \emph{no auctions at all}, which undermines sealed-bid privacy and fairness. Current popular marketplaces such as eBay and Facebook Marketplace follow two distinct patterns. eBay’s proxy-bidding model reveals live bid progression and awards the item to the highest bid at close \parencite{ebay_help_bidding}. Facebook Marketplace, by contrast, is a listing-plus-messaging workflow rather than a formal auction protocol, with weak buyer protections \parencite{fb_marketplace_help}. Public blockchain auctions add strong auditability but invite transaction ordering attacks (front-running/MEV) that can leak or distort bids during submission and reveal phases \parencite{daian2019_flashboys2}. Cryptographic sealed-bid auctions can hide non-winning bids entirely. Deploying a protocol without a trusted auctioneer requires secure multiparty computation (MPC). MPC has been demonstrated in production (e.g., the Danish sugar-beet auction) and modern frameworks such as MP-SPDZ show practical performance across secret-sharing, HE, and garbled-circuit backends \parencite{bogetoft2009_mpc_live,mp-spdz,damgaard2012_spdz,evans2018_pragmatic_mpc,sako2000_hide_losers}.

\subsection*{What is Veilid?}
\emph{Veilid} is a privacy-first, open-source, peer-to-peer application framework. Each app embeds a node into a global overlay where peers are equal (no privileged relays), connections are end-to-end encrypted, and private routing obscures network locations. After a brief bootstrap, apps communicate directly over transports such as UDP/TCP/QUIC/Web and exchange data via a secure DHT designed for mobile and desktop \parencite{veilid_developer_book}. Veilid provides addressable, encrypted endpoints (public-key identities) and metadata-minimized communication, independent of any blockchain.

\subsection*{Why Veilid for this marketplace?}
In line with the project brief to \emph{build an application using the Veilid framework}, this marketplace needs private identities, censorship-resistant transport, and NAT-friendly reachability without a trusted coordinator. Veilid provides exactly these: (i) addressable, encrypted endpoints keyed by public keys rather than IPs, (ii) a secure DHT for publishing listings and discovering MPC parties, and (iii) obfuscated routing that limits metadata exposure during bid submission and MPC setup \parencite{veilid_developer_book}. Because Veilid is blockchain-agnostic, settlement can occur off-overlay (e.g., Monero testnet) while \emph{coordination} and \emph{communication} remain private and decentralized. \parencite{cryptonote2013_whitepaper}.


\subsection*{Project Goal}
Build a \textbf{peer-to-peer sealed-bid marketplace} that (1) preserves bidder privacy by default, (2) mitigates front-running risk during bid submission, and (3) operates \emph{without a central auctioneer}. The prototype combines MPC for winner/price computation with \emph{Veilid} for identity, routing, and availability \parencite{veilid_developer_book}. Payments clear on \emph{Monero testnet} after the MPC outcome is published. This demonstrates the full flow without handling real funds while inheriting the confidential-transaction model from the CryptoNote design (Monero precursor) \parencite{cryptonote2013_whitepaper}.

\subsection{Project Objectives}
\begin{itemize}[noitemsep]
  \item \textbf{Main objective.} This project shall deliver a working peer-to-peer marketplace application on the Veilid network that exclusively supports sealed-bid listings and private content unlock for the winning bidder.

  \item \textbf{Testable sub-objectives.}
    \begin{itemize}[noitemsep]
      \item \emph{Listings and purchases.}\\ Implement end-to-end flows: create listing → submit bid → determine winner → complete purchase.
       \\\textbf{Test:} demo run and automated integration tests covering success/edge cases (invalid bid, tie, timeout).
      \item \emph{Sealed-bid via MPC.}\\ Integrate a multi-party computation protocol to select the highest valid bid without revealing non-winning bids. \\\textbf{Test:} unit tests with mocked parties. Tests to show loser-bid privacy with reproducible benchmarks for N bidders.
      \item \emph{MPC-gated decryption.}\\
      Ideally: Bind winner selection to content access: the MPC that selects the highest valid bid also releases a winner-only decryption capability for the listing ($K$ via 1-out-of-n OT(Oblivious Transfer)) only if settlement is confirmed on testnet.\\
      \textbf{Test:} unit tests showing that non-winners cannot recover $K$. Create integration test with mocked \texttt{paid}=0/1. Testnet demo where confirmation flips release.
      \item \emph{Settlement on Monero Testnet.}\\ Simulate network init, fund wallets, and programmatic “real” transactions for deposits/escrow/release. \\\textbf{Test:} scripted testnet transactions with confirmations \& failure handling.
    \end{itemize}
\end{itemize}



\subsection{Project Beneficiaries}
\begin{itemize}[noitemsep]
  \item \textbf{Project supervisor:} 
  Gain a proof-of-concept application that utilizes Veilid’s framework (keyed identities, secure DHT, obfuscated routing) with a non-toy use case. Deliverables (repo and demo video, alongside shell scripts) support future supervision of similar projects.
  \item \textbf{Veilid development team/Veilid Community:}
  A real world application that demonstrates capabilities of Veilid when integrated with other academic projects. Potential upstream bugfixes if warranted.
  \item \textbf{Marketplace users - research oriented (prototype).}
  Sellers get fairer price discovery without leaking losing bids. Bidders gain privacy and reduced front-running risk. In real-world deployments, at-risk users (e.g., in high-censorship environments) could benefit from metadata-minimising coordination.
  \item \textbf{End users in the future.}
  A metadata-minimising, sealed-bid coordination layer could be adapted for \emph{safer} exchange of sensitive information (e.g., purchasing or rewarding data disclosures) where overt communication is filtered or surveilled. 
\end{itemize}

\subsection{Project Plan}
\begin{itemize}[noitemsep]
  \item \textbf{Foundation (Nov-Dec 2025): Understand \& set up Veilid. Digest current literature}
    \begin{itemize}[noitemsep]
      \item Read Veilid API spec \& pull core code segments from \emph{veilidchat}.
      \item Create and ready a platform agnostic development environment with scripts to boot local Veilid nodes (to aid my cross-platform development - x86 Linux/MacOS ARM).
      \item Begin development of webapp, light tests to see dev env works before implementing any of the features to be delivered. Stack: C++ to WebAssembly with a TypeScript UI. 
    \end{itemize}

  \item \textbf{Milestone 1 (mid Jan–Feb 2026): Listings \& bids over Veilid}
    \begin{itemize}[noitemsep]
      \item Listing publish/discovery over secure DHT \& private bid submission path.
      \item Mocked MPC winner \& basic content encryption at listing. Create happy-path E2E test.
      \item Spool up private Monero testnet and understand integration with Veilid. 
      \item Update Monero testnet script \& modify to fit usecase. Integrate with deployment script of dev network.
    \end{itemize}

  \item \textbf{Milestone 2 (late Feb–Mar 2026): MPC \& testnet}
    \begin{itemize}[noitemsep]
      \item Integrate real MPC (MP-SPDZ) and test happy path.
      \item Fully integrate Monero testnet scripts. Implement Winner-only decrypt on confirmation.
      \item E2E demo with simple implementation of MP-SPDZ + testnet.
    \end{itemize}

  \item \textbf{Milestone 3 (late Mar 2026): Fully integrated MPC in Decryption}
    \begin{itemize}[noitemsep]
      \item (Attempt to) fully integrate MPC to the decryption algorithm.
      \item Make test scripts/infrastructure spool up for project demo (dockerized nodes on one device). 
    \end{itemize}
    
  \item \textbf{Deliverables (Apr 2026): Package \& submit}
    \begin{itemize}[noitemsep]
      \item Wrap up writing dissertation 
      \item Submit final report \& demo video.
    \end{itemize}
\end{itemize}
%TC:ignore
\begin{landscape}
\begin{adjustbox}{max width=\linewidth}
\begin{ganttchart}[
  time slot format=isodate,
  x unit=4.5cm,
  y unit chart=0.6cm,
  hgrid, vgrid
]{2025-11-01}{2026-03-31}
  \gantttitlecalendar{year, month=name} \\

  \ganttgroup{Foundation}{2025-11-01}{2025-12-31} \\
  \ganttbar{Read Veilid APIs}{2025-11-01}{2025-11-30} \\
  \ganttbar{Dev env + scripts}{2025-11-01}{2025-12-31} \\
  \ganttbar{Start webapp scaffold}{2025-12-01}{2025-12-31} \\

  \ganttgroup{M1: Listings \& bids}{2026-01-01}{2026-02-28} \\
  \ganttbar{Publish/find via DHT}{2026-01-01}{2026-01-31} \\
  \ganttbar{Mocked MPC winner}{2026-01-15}{2026-02-28} \\
  \ganttbar{Monero testnet + scripts}{2026-02-01}{2026-02-28} \\

  \ganttgroup{M2: MPC \& testnet}{2026-02-01}{2026-03-31} \\
  \ganttbar{Wire MP-SPDZ (happy path)}{2026-02-01}{2026-03-15} \\
  \ganttbar{Only decrypt on confirm}{2026-03-01}{2026-03-15} \\

  \ganttgroup{M3: Full integration}{2026-03-01}{2026-03-31} \\
  \ganttbar{MPC in decryption path}{2026-03-15}{2026-03-31} \\
\end{ganttchart}
\end{adjustbox}
\end{landscape}
%TC:endignore

\subsection{Risk Matrix (Probability–Severity–Mitigation)}
\textbf{Legend:} L = Low,\; M = Medium,\; H = High.

\begin{longtable}{>{\RaggedRight\arraybackslash}p{0.30\linewidth} c c >{\RaggedRight\arraybackslash}p{0.58\linewidth}}
\toprule
\textbf{Risk} & \textbf{Prob.} & \textbf{Sev.} & \textbf{Mitigation} \\
\midrule
\endfirsthead

\toprule
\textbf{Risk} & \textbf{Prob.} & \textbf{Sev.} & \textbf{Mitigation} \\
\midrule
\endhead

\midrule
\multicolumn{4}{r}{\small\itshape Continued on next page} \\
\midrule
\endfoot

\bottomrule
\endlastfoot

Veilid API or reusing code from \texttt{veilidchat} is harder than expected
  & M & H & Build a small wrapper with four actions: publish, find, send, receive. 
  Start by running \texttt{veilidchat} as a separate helper and talk to it with 
  simple text messages. If the direct API later works, replace the helper. 
  Write clear build steps and ensure code is commented and documented to reduce code entropy (loss of context). \\

Understanding MPC and integrating MP--SPDZ takes longer than planned
  & M & H & Follow a short learning plan: run the MP--SPDZ tutorial and a simple 
  max-of-\(N\) example. Treat MPC as a small 
  command-line tool with JSON in/out so the app can call it easily. Run all parties 
  locally first, before implementing dockerised build scripts. \\

Integrating Veilid–MPC–Monero (HTTP/JSON)
  & M & H & Standardise on HTTP+JSON: use Monero’s native JSON-RPC, expose MPC as a localhost service with a minimal OpenAPI/JSON-Schema-defined surface. Generate clients, add contract tests before E2E, enforce timeouts/retries and idempotent ops. Keep MPC/Monero as separate processes. \\

Containerisation \& multi-arch builds (Docker/Compose)
  & M & H & Build small images from fixed base versions. Use plain HTTP/JSON between services so they connect cleanly. Start everything with a single Compose file (Veilid app, MPC sidecar, Monero sidecar). Keep chain data in named volumes. To reduce surprises, target one platform for the demo (64-bit Linux) and have CI build and run the images throughout development. Add health checks and restart policies, and run as a non-root user with secrets loaded from a .env file. \\

P2P connectivity on eduroam
  & M & M & Dockerise apps on same-LAN with docker multi-node compose \&
  keep a pre-recorded run with logs \& video for assessment. \\

Toolchain/portability (macOS vs Linux, dependencies)
  & M & M & Containerised builds with fixed minimal versions. CI on x86\_64 Linux on GitHub Actions, avoiding
  platform-specific flags. reproducible build script for different architectures. \\

Hardware failure / data loss
  & L & H & Keep dissertation sourcefiles in \texttt{.tex} within Git, push \& pull frequently.
  Keep remote backups for code in GitHub \& GitLab. Maximum loss will be minimal \\
\end{longtable}


\subsection{Legal, Social, Ethical and Professional Considerations}

\textbf{Project category (per handbook 4.5.7):} Category 1 prototype not intended
for distribution. Operation is confined to a local Veilid dev overlay and Monero
testnet. No mainnet, no PII, and no real funds.

\textbf{Scope.} Proof-of-concept only: runs on testnet for Monero, but runs on a localized Veilid dev environment.


\textbf{Statement on illicit uses.} I explicitly condemn any attempt to adapt this research for illicit trade, exploitation, or other illegal activity. The work is motivated by technical research questions (privacy-preserving auction protocols, MPC integration, and overlay networking) rather than any intent to facilitate wrongdoing. All design, testing and evaluation are performed within controlled, local test environments to prevent misuse.

\textbf{Principal risk (dual-use).} A private marketplace design could in principle be repurposed to facilitate illicit exchange if deployed without appropriate safeguards.

\textbf{Mitigations to be implemented in this prototype.}

\begin{itemize}[noitemsep]
  \item No mainnet support. Script will have localized test peers (on same LAN) with public bootstrap for Veilid disabled (dev veilid network).
  \item No custody of real funds, testnet. Payment “confirmations” exist only on Monero's testnet, and wallets/the network are created/destroyed with the run script.
\end{itemize}

\textbf{Legal (licensing).} Project is released under \textbf{MPL-2.0} (file-level copyleft). Veilid already exists under \textbf{MPL-2.0}. any modified Veilid files are published under MPL as required. No copyleft extends to independent project files beyond their chosen license. 


\textbf{Professional conduct.} No human participants.

\textbf{Residual risk and fallback.} Code could be forked and modified. Reduce this by omitting deployment scripts on live Veilid + live Monero. If further legal/ethical concerns arise, disable network capabilities and run on a local area network.


\subsection{References}
\printbibliography

\subsection{Appendix: Research Ethics Form }
\includepdf[pages={1-2}]{EthicsForm.pdf}
\subsection{Appendix: Client Description Sheet}
\includepdf[pages={1-2}]{projectbrief.pdf}
\end{document}
